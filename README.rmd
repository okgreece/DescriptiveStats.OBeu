---
title: DescriptiveStats.OBeu <img src="obeu_logo.png" align="right" />
author: "Kleanthis Koupidis, Aikaterini Chatzopoulou, Charalampos Bratsas"
date: "November 7, 2016"
output:
  github_document:
    fig_width: 8
    fig_height: 8
    dev: png
    html_preview: false
  number_sections: yes
subtitle: A Short Guide in R and OpenCPU environments
---

[![Build Status](https://travis-ci.org/okgreece/DescriptiveStats.OBeu.svg?branch=master)](https://travis-ci.org/okgreece/DescriptiveStats.OBeu)
[![Pending Pull-Requests](http://githubbadges.herokuapp.com/okgreece/DescriptiveStats.OBeu/pulls.svg)](https://github.com/okgreece/DescriptiveStats.OBeu/pulls)
[![Github Issues](http://githubbadges.herokuapp.com/okgreece/DescriptiveStats.OBeu/issues.svg)](https://github.com/okgreece/DescriptiveStats.OBeu/issues)

This document describes the use of the functions implemented in DescriptiveStats.OBeu package both in R and OpenCPU
environments. 


#Install:

Load *devtools* library or install it if not already:

```{r, eval=FALSE, include=T}
install.packages("devtools")
```

Then install *DescriptiveStats.OBeu* from [Github](https://github.com/okgreece/DescriptiveStats.OBeu)

```{r, eval=FALSE, include=T}
devtools::install_github("okgreece/DescriptiveStats.OBeu")
```

And load the library

```{r}
library(DescriptiveStats.OBeu)
```


#Use:

The basic function is: 
```{r, eval=FALSE, include=TRUE}
ds.analysis(data, c.out=1.5, box.width=0.15, outliers=T, hist.class="Sturges", corr.method= "pearson", fr.select=NULL)
```

where *data*: The input data

*c.out*: The level of of outliers, default is 1.5*sd

*box.width*:  The width level is determined 0.15 times the square root of the size of the input data.

*outliers*: If TRUE outliers will be included in bloxplot.

*corr.method*: The correlation coefficient method to compute: "pearson" (default), "kendall" or "spearman".

and *fr.select*: One or more nominal variables to calculate their corresponding frequencies.


### R Example

The package includes the following data: 

```{r}
# 1. json format file
sample_json_openspending
```

```{r}
# 3. a link to json file-openspending
sample_json_link_openspending
```

```{r}
# 4. a link to json file-rudolf
sample_json_link_rudolf
```

```{r}
# 4. a link to json file rudolf
sample_df_openspending
```

We select for example the data frame produced from Open Spending

```{r}
ds.analysis(sample_df_openspending)
```

Also we can define the parameters of *box.out* to 2 and *corr.method* to "spearman"

```{r}
ds.analysis(sample_df_openspending, c.out=2, box.width=0.15, outliers=T, hist.class="Sturges", corr.method= "spearman", fr.select=NULL
```


# OpenCPU Short Guide - DescriptiveStats.OBeu

Go to: http://okfnrg.math.auth.gr/ocpu/test/

## How to use functions:

Type to the endpoint:

```{r, eval=FALSE, include=TRUE}
 ../library/ {name of the library} /R/ {function}
```

If you want to see the function parameters you should: 

+ Select Method:
```{r, eval=FALSE, include=TRUE}
Get
```

and in order to run a function you should:

+ Select Method:
```{r, eval=FALSE, include=TRUE}
Post
```


## Example #1:

1 Go to http://okfnrg.math.auth.gr/ocpu/test/

2 Copy and paste the following function to the endpoint 
```{r, eval=FALSE, include=TRUE}
../library/DescriptiveStats.OBeu/R/ds.analysis
```

3 *Select Method*:
```{r, eval=FALSE, include=TRUE}
 Post
```

4 **Add parameters** and set:

Define the input time series data:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
data
```

+ *Param Value* the following:
 
```{r, eval=FALSE, include=TRUE}
sample_df_openspending
```

Define the level of boxplot outliers (*optional*),default is 1.5:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
c.out
```

+ *Param Value*: 
```{r, eval=FALSE, include=TRUE}
2.5
```
box.width
outliers
hist.class


Define the correlation method (*corr.method*), default is *"pearson"*:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
corr.method
```

+ *Param Value* -for example:
```{r, eval=FALSE, include=TRUE}
"spearman"
```

5 Ready! Click on **Ajax request**!

6 To see the results: 

copy the */ocpu/tmp/{this}/R/.val* (the first choice on the right panel)

7 and paste http://okfnrg.math.auth.gr/ocpu/tmp/ {this} /R/.val on a new tab.




## Example #2 - Open Spending-DescriptiveStats

1 Go to http://okfnrg.math.auth.gr/ocpu/test/

2 Copy and paste the following function to the endpoint 
```{r, eval=FALSE, include=TRUE}
../library/DescriptiveStats.OBeu/R/open_spending.ds
```

3 *Select Method*:
```{r, eval=FALSE, include=TRUE}
Post
```

4 **Add parameters** and set:

Define the input time series data:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
json_data
```

+ *Param Value* -the following output from rudolf/ open spending api or you can provide the also **json URL**:
```{r, eval=FALSE, include=TRUE}
# 1. json format file
sample_json_openspending

# 2. a link to json file-openspending
sample_json_link_openspending

```


Define the what:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
what
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
"functional_classification_2.Function+functional_classification_2.Code"
```

Define the to.what parameter:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
to.what
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
"variable"
```


Define the amount parameter:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
amount
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
"Revised"
```


Define the level of boxplot outliers (*optional*),default is 1.5:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
coef.outl
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
0.8
```

Define TRUE/FALSE if outliers should be returned (*optional*),default is TRUE:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
box.outliers
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
TRUE
```

Define box width in boxplot (*optional*),default is 0.25*sqrt(n):

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
box.wdth
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
0.2
```


Define the correlation method (*cor.method*), default is *"pearson"*:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
cor.method
```

+ *Param Value* -for example:
```{r, eval=FALSE, include=TRUE}
"spearman" 
```

5 Ready! Click on **Ajax request**!

6 To see the results: 

copy the */ocpu/tmp/{this}/R/.val* (the first choice on the right panel)

7 and paste http://okfnrg.math.auth.gr/ocpu/tmp/ {this} /R/.val on a new tab.



## Example #3 - Rudolf DescriptiveStats

1 Go to http://okfnrg.math.auth.gr/ocpu/test/

2 Copy and paste the following function to the endpoint 
```{r, eval=FALSE, include=TRUE}
../library/DescriptiveStats.OBeu/R/open_spending.ds
```

3 *Select Method*:
```{r, eval=FALSE, include=TRUE}
Post
```

4 **Add parameters** and set:

Define the input time series data:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
json_data
```

+ *Param Value* -the following output from rudolf/ open spending api or you can provide the also **json URL**:
```{r, eval=FALSE, include=TRUE}
# 1. json link
sample_json_link_rudolf
```


Define the what:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
what
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
"global__fiscalPeriod__28951.notation"
```

Define the to.what parameter:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
to.what
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
"global__budgetPhase__afd93.prefLabel"
```


Define the amount parameter:

+ *Param Name*:
 
```{r, eval=FALSE, include=TRUE}
amount
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
"global__amount__0397f.sum"
```


Define the level of boxplot outliers (*optional*),default is 1.5:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
coef.outl
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
0.8
```

Define TRUE/FALSE if outliers should be returned (*optional*),default is TRUE:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
box.outliers
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
TRUE
```

Define box width in boxplot (*optional*),default is 0.25*sqrt(n):

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
box.wdth
```

+ *Param Value*:
```{r, eval=FALSE, include=TRUE}
0.2
```


Define the correlation method (*cor.method*), default is *"pearson"*:

+ *Param Name*: 
```{r, eval=FALSE, include=TRUE}
cor.method
```

+ *Param Value* -for example:
```{r, eval=FALSE, include=TRUE}
"spearman" 
```

5 Ready! Click on **Ajax request**!

6 To see the results: 

copy the */ocpu/tmp/{this}/R/.val* (the first choice on the right panel)

7 and paste http://okfnrg.math.auth.gr/ocpu/tmp/ {this} /R/.val on a new tab.




# Further Details:

+ https://www.opencpu.org/help.html

+ https://cran.r-project.org/web/packages/opencpu/vignettes/opencpu-server.pdf

+ https://www.opencpu.org/jslib.html

# Github:

+ https://github.com/okgreece/DescriptiveStats.OBeu